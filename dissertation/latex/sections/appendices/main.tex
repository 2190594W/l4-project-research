\begin{appendices}

\chapter{Appendices}
\label{ch:appendices}

\section{Appendix A - Deployment Roles \& Users}
\label{appendix:roles_users}

\Cref{fig:appendix_roles_users} presents the identified user roles of the \acrfull{dcs} in red, to the left, and the identified users in blue, to the right. Also see (Electronic Appendix \ref{appendix:e_roles_users}).

\begin{figure}[htp]
    \centering
    \label{fig:appendix_roles_users}
    \includegraphics[width=\linewidth]{appendices/mind_maps/ABE_Users_slides_Oct26.pdf}
    \caption{Mind Map representing the different users \& roles identified for a \acrshort{dcs} deployment.}
\end{figure}

\section{Appendix B - Environment Attributes}
\label{appendix:environments}

\Cref{fig:appendix_environments} presents the identified environment attributes for the \acrfull{dcs}. Also see (Electronic Appendix \ref{appendix:e_environments}).

\begin{figure}[htp]
    \centering
    \label{fig:appendix_environments}
    \includegraphics[width=\linewidth]{appendices/mind_maps/ABE_Environments_slides_Oct26.pdf}
    \caption{Mind Map representing the different environment attributes identified for a \acrshort{dcs} deployment.}
\end{figure}

\section{Appendix C - System Use Cases}
\label{appendix:use_cases}

\Cref{fig:appendix_use_cases} presents the identified use cases for the \acrfull{dcs}. Also see (Electronic Appendix \ref{appendix:e_use_cases}).

\begin{figure}[htp]
    \centering
    \label{fig:appendix_use_cases}
    \includegraphics[width=\linewidth]{appendices/mind_maps/ABE_Use_Cases_slides_Oct26.pdf}
    \caption{Mind Map representing the different use cases identified for a \acrshort{dcs} deployment.}
\end{figure}

\section{Appendix D - Enrolment Diagram for Staff User}
\label{appendix:enrolment_diagram}

\Cref{fig:appendix_sta_deployment} represents a deployment diagram for the \theResServer system, with staff member enrolling into the system. This diagram is an alternative to the student enrolment diagram in \Cref{fig:deployment_diagram}.

The staff member can be seen requesting a user key \#1 (and providing their staff username) from the \acrshort{dcs} Teaching Assistant, whom verifies the staff members's identity and then retrieves their details \#2 from the HR/Payroll system. The Teaching Assistant then processes the returned attributes \#5 for the Master Key Server, and then requests a new key \#6 by providing the student's attributes. The Master Key Server can be seen processing \#7 and then returning the newly generated key \#8 to the Teaching Assistant, whom finally provides the key to the staff member.

\begin{figure}[htp]
    \centering
    \label{fig:appendix_sta_deployment}
    \includegraphics[width=\linewidth,keepaspectratio]{appendices/diagrams/flow_of_info/enrollment_sta_sequence.pdf}

    \caption{A sequence diagram demonstrating the enrolment process for a staff member.}

\end{figure}

\section{Appendix E - System Architecture Diagram}
\label{appendix:architecture_diagram}

\Cref{fig:appendix_sys_arch_full} represents a system architecture diagram for the \theResServer system. This diagram is an alternative to the condensed system architecture diagram in \Cref{fig:sys_arch_abbrv}.

The \acrfull{mks} is shown in an offline state with access to a local copy of the \OpenABE library for provisioning the system \& generating user keys. The \acrfull{prs} is shown receiving offline updates from the \acrshort{mks}, managing a local database with resource metadata \& the associated resource storage and providing search, config and upload \& download interfaces for clients. The \acrfull{crs} is shown with local access to an \OpenABE library for encryption \& decryption and access to an abstract Authentication Service (such as the university's SSO system). The \acrshort{crs} also implements the search, config and upload \& download interfaces provided by the \acrshort{prs} and provides its own upload \& download, encrypt \& decrypt and resource search interfaces for the user.

\begin{figure}[htp]
    \centering
    \label{fig:appendix_sys_arch_full}
    \includegraphics[width=\linewidth,keepaspectratio]{appendices/diagrams/infrastructure/system_architecture.pdf}

    \caption{
      A full architecture diagram describing the system architecture of the \theResServer system.
    }

\end{figure}

\section{Appendix F - Implementing Case Study \#0 with \thePolicyLang}
\label{appendix:case_study_0_policy}

\input{sections/case_studies/fig_case_0}

\section{Appendix G - Implementing Case Study \#2 with \thePolicyLang}
\label{appendix:case_study_2_policy}

\input{sections/case_studies/fig_case_2}

\section{Appendix H - Implementing Case Study \#3 with \thePolicyLang}
\label{appendix:case_study_3_policy}

\input{sections/case_studies/fig_case_3}

\section{Appendix I - Implementing Case Study \#4 with \thePolicyLang}
\label{appendix:case_study_4_policy}

\input{sections/case_studies/fig_case_4}

\section{Appendix J - Physical Assets for Master Key Server}
\label{appendix:mks_assets}

\begin{table}[htp]
  \rowcolors{2}{}{gray!3}
  \begin{tabularx}{\linewidth}{lX}
    \textbf{Asset}          & \textbf{Description} \\
    Router or Switch        &	Router (AP) or Switch host is connected to (if host is not offline). \\
    Network connection      &	Physical connection to network (if host not offline). \\
    Storage                 &	Storage for host, high risk, contains keys, config, server files etc. \\
    Monitor                 &	General output for host, low risk. \\
    Keyboard                &	General input for host, low risk. \\
    Mouse                   &	General input for host, low risk. \\
    Computer                &	The actual host machine of the server. \\
    Room key                &	Simply the key that grants access to the physical room the server is located in. \\
    Building                &	The physical building the host machine is located in. \\
    Room                    &	The physical room the host machine is located in. \\
    External Storage/Media  &	Any external storage/media attached to the host machine during operation. \\
  \end{tabularx}
  \caption{Physical assets for the \acrfull{mks}}
  \label{tab:physical_assets_mk}
\end{table}

\section{Appendix K - Assets for Public Resource Server}
\label{appendix:prs_assets}

\begin{table}[htp]
  \rowcolors{2}{}{gray!3}
  \begin{tabularx}{\linewidth}{lX}
    \textbf{Asset}            & \textbf{Description} \\
    Master Public Key file    &	Not dangerous, value is distributed as part of normal operation. \\
    Global Attributes file    &	As above, is distributed as part of normal operation but potentially reveals information on the system. \\
    Server Secret (sessions)  &	Secret used to set up sessions with users, and generate CSRF tokens. Potentially dangerous. \\
    Local web server files    &	Contains other config files, but also the key files. Needs protection. \\
    jinja2 plugin             &	Plugin to generate templates. Lowish risk, but an external party provides software. \\
    flask plugin              &	Tool to create and run a web server, potentially damaging. Produced and updated by an external party. \\
    PyMongo plugin            &	Plugin used by flask server to communicate with the Mongo DB. \\
    Python3 lib               &	The Python3 library. Similar to above, lower vulnerability as very openly and globally reviewed. \\
    MongoDB Database          & Database of resource meta data. \\
    MongoDB system            & System running MongoDB databases. Produced and updated by an external party. \\
    C lib                     &	The C library. Similar to Python, low vulnerability as extremely openly and globally reviewed. Slow to update as well. \\
    Resource files            & Encrypted ciphertexts representing the resources stored on the server. \\
    Firewall                  &	Firewall of the host. Should block incoming requests. May not even be necessary as Key Server should be offline when deployed. \\
    UNIX OS                   &	The UNIX OS the host is running on. External party software so potential risk.
  \end{tabularx}
  \caption{Virtual assets for the \acrfull{prs}}
  \label{tab:virtual_assets_pr}
\end{table}

\begin{table}[htp]
  \rowcolors{2}{}{gray!3}
  \begin{tabularx}{\linewidth}{lX}
    \textbf{Asset}          & \textbf{Description} \\
    Router or Switch        &	Router (AP) or Switch host is connected to. \\
    Network connection      &	Physical connection to network. \\
    Storage                 &	Storage for host, high risk, contains resources, config, server files etc. \\
    Computer                &	The actual host machine of the server. \\
    Building                &	The physical building the host machine is located in. \\
    Room                    &	The physical room the host machine is located in. \\
    External Storage/Media  &	Any external storage/media attached to the host machine during operation. \\
  \end{tabularx}
  \caption{Physical assets for the \acrfull{prs}}
  \label{tab:physical_assets_pr}
\end{table}

\section{Appendix L - Assets for Client Resource Server}
\label{appendix:crs_assets}

\begin{table}[htp]
  \rowcolors{2}{}{gray!3}
  \begin{tabularx}{\linewidth}{lX}
    \textbf{Asset}            & \textbf{Description} \\
    User Key                  & High risk. The end user's private key, used to decrypt all resources. \\
    Master Public Key file    &	Not dangerous, value is distributed as part of normal operation. \\
    Global Attributes file    &	As above, is distributed as part of normal operation but potentially reveals information on the system. \\
    Server Secret (sessions)  &	Secret used to set up sessions with users, and generate CSRF tokens. Potentially dangerous. \\
    Local web server files    &	Contains other config files, but also the key files. Needs protection. \\
    jinja2 plugin             &	Plugin to generate templates. Lowish risk, but an external party provides software. \\
    flask plugin              &	Tool to create and run a web server, potentially damaging. Produced and updated by an external party. \\
    PyMongo plugin            &	Plugin used by flask server to communicate with the Mongo DB. \\
    PyOpenABE bindings        &	Python bindings for decryption. High risk. Also maintained by external party. \\
    cython lib/plugin         &	Python tool to compile python down to C. Interprets all bindings. So as above. \\
    Python3 lib               &	The Python3 library. Similar to above, lower vulnerability as very openly and globally reviewed. \\
    OpenABE C lib             &	OpenABE library for all user key generation. High risk. Maintained by external party. \\
    MongoDB Database          & Database of resource meta data. \\
    MongoDB system            & System running MongoDB databases. Produced and updated by an external party. \\
    C lib                     &	The C library. Similar to Python, low vulnerability as extremely openly and globally reviewed. Slow to update as well. \\
    Resource files            & Decrypted resources downloaded from server. \\
    Firewall                  &	Firewall of the host. Up to user. \\
    UNIX OS                   &	The UNIX OS the host is running on. External party software so potential risk.
  \end{tabularx}
  \caption{Virtual assets for the \acrfull{crs}}
  \label{tab:virtual_assets_cr}
\end{table}

\begin{table}[htp]
  \rowcolors{2}{}{gray!3}
  \begin{tabularx}{\linewidth}{lX}
    \textbf{Asset}          & \textbf{Description} \\
    Router or Switch        &	Router (AP) or Switch host is connected to (if host is not offline). \\
    Network connection      &	Physical connection to network (if host not offline). \\
    Storage                 &	Storage for host, high risk, contains keys, config, server files etc. \\
    Monitor                 &	General output for host, low risk. \\
    Keyboard                &	General input for host, low risk. \\
    Mouse                   &	General input for host, low risk. \\
    Computer                &	The actual host machine of the server. \\
    External Storage/Media  &	Any external storage/media attached to the host machine during operation. \\
  \end{tabularx}
  \caption{Physical assets for the \acrfull{crs}}
  \label{tab:physical_assets_cr}
\end{table}

\section{Electronic Appendices}
\label{appendix:electronic_appendices}

\subsection{Appendix E1 - Deployment Roles \& Users}
\label{appendix:e_roles_users}

We make note of the Deployment Roles \& Users mind map document. Although contained in Appendix \ref{appendix:roles_users}, it is too large to be viewed fully within the dissertation, therefore it is included in the submitted code file under: \texttt{l4-project-research/Mind\_Maps/ABE\_Users.slides\_Oct26.pdf}.

\subsection{Appendix E2 - Environment Attributes}
\label{appendix:e_environments}

We make note of the Environment Attributes mind map document. Although contained in Appendix \ref{appendix:environments}, it is too large to be viewed fully within the dissertation, therefore it is included in the submitted code file under: \texttt{l4-project-research/Mind\_Maps/ABE\_Environments.slides\_Oct26.pdf}.

\subsection{Appendix E3 - System Use Cases}
\label{appendix:e_use_cases}

We make note of the system Use Cases mind map document. Although contained in Appendix \ref{appendix:use_cases}, it is too large to be viewed fully within the dissertation, therefore it is included in the submitted code file under: \texttt{l4-project-research/Mind\_Maps/ABE\_Use\_Cases.slides\_Oct26.pdf}.

\subsection{Appendix E4 - Risk Assessment}
\label{appendix:e_risk_assessment}

We make note of the Risk Assessment Excel document. Too large to submit within the dissertation, it is included in the submitted code file under: \texttt{l4-project-research/reports/RiskAssessment.xlsx}.

\end{appendices}
